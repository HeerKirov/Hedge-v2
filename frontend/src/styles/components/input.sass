@import "../base/size"
@import "../base/color.scss"

input,
textarea
  -webkit-writing-mode: horizontal-tb !important
  text-rendering: auto
  letter-spacing: normal
  word-spacing: normal
  text-transform: none
  text-indent: 0
  text-shadow: none
  text-align: start
  justify-content: flex-start
  -webkit-rtl-ordering: logical
  box-sizing: border-box
  outline: none

.input
  align-items: center
  display: inline-flex
  font-size: $font-size-7
  line-height: 1.2
  height: $height-std
  padding: 0 calc(0.85em - 1px)
  border: 1px solid $deep-sidebar
  border-radius: $radius-size-std
  @media (prefers-color-scheme: dark)
    background-color: $sidebar-dm
    color: $literal-dm
    border-color: $deep-sidebar-dm

  $input-size-map: ("small" ($font-size-8, $height-small), "medium" ($font-size-6, $height-medium))
  $input-width-map: ("one-third" 0.333em, "half" 0.5em, "small" 0.75em, "std" 1em, "medium" 1.25em, "large" 1.5em, "2x" 2em, "3x" 3em)

  &:focus
    box-shadow: 0 0 3px $deep-sidebar

  &.is-fullwidth
    max-width: 100%
    width: 100%
  @each $name, $pair in $input-size-map
    $font-size: nth($pair, 1)
    $height: nth($pair, 2)
    &.is-#{$name}
      font-size: $font-size
      height: $height
  @each $name, $size in $input-width-map
    &.is-width-#{$name}
      width: #{$size * 13.6}
      max-width: #{$size * 13.6}
  @each $name, $size in $radius-size-map
    &.radius-#{$name}
      border-radius: $size
  @media (prefers-color-scheme: light)
    @each $name, $pair in $colors
      $color: nth($pair, 1)
      &.is-#{$name}
        border-color: $color
        &:focus
          box-shadow: 0 0 2px $color
  @media (prefers-color-scheme: dark)
    @each $name, $pair in $colors-dark-mode
      $color: nth($pair, 1)
      &.is-#{$name}
        border-color: $color
        &:focus
          box-shadow: 0 0 2px $color

.textarea
  $textarea-max-height: 40em !default
  $textarea-min-height: 8em !default
  align-items: center
  display: inline-flex
  font-size: $font-size-7
  padding: calc(0.6em - 1px) calc(0.85em - 1px)
  border: 1px solid $deep-sidebar
  border-radius: $radius-size-std
  @media (prefers-color-scheme: dark)
    background-color: $sidebar-dm
    color: $literal-dm
    border-color: $deep-sidebar-dm
  &:focus
    box-shadow: 0 0 3px $deep-sidebar
  max-width: 100%
  min-width: 100%
  resize: vertical
  &:not([rows])
    max-height: $textarea-max-height
    min-height: $textarea-min-height
  &[rows]
    height: initial
  &.has-fixed-size
    resize: none
